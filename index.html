<!DOCTYPE html>
<html>
<head>
    <title>Happy Birthday 3D</title>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.min.js"></script>
    <style>
        body { margin: 0; }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <div id="info">Loading model...</div>
    
    <script>
        // Your GLB URL
        const modelUrl = 'https://raw.githubusercontent.com/chllbv/Happy-Birthday/refs/heads/main/pink_bedroom_miside.glb';
        
        console.log('Starting load from:', modelUrl);
        
        // Basic setup
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x222222);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;
        
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        
        // Add light
        const light = new THREE.AmbientLight(0xffffff, 1);
        scene.add(light);
        
        // Try to load with error handling
        const loader = new THREE.GLTFLoader();
        
        loader.load(
            modelUrl,
            function(gltf) {
                console.log('✅ Model loaded successfully!', gltf);
                scene.add(gltf.scene);
                document.getElementById('info').textContent = 'Model loaded! Drag to rotate.';
            },
            function(xhr) {
                console.log('Loading progress:', xhr);
                const percent = Math.round((xhr.loaded / xhr.total) * 100);
                document.getElementById('info').textContent = 'Loading: ' + percent + '%';
            },
            function(error) {
                console.error('❌ LOAD ERROR:', error);
                console.error('Error details:', error.message);
                console.error('Error stack:', error.stack);
                
                // Show detailed error
                document.getElementById('info').innerHTML = 
                    '❌ Error loading model:<br>' +
                    error.message + '<br><br>' +
                    'Checking file...';
                
                // Test if file is accessible
                testFileAccess();
            }
        );
        
        function testFileAccess() {
            console.log('Testing file access...');
            
            // Try to fetch the file directly
            fetch(modelUrl)
                .then(response => {
                    console.log('Fetch response status:', response.status);
                    console.log('Fetch response headers:', response.headers);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    return response.blob();
                })
                .then(blob => {
                    console.log('File blob size:', blob.size, 'bytes');
                    console.log('File type:', blob.type);
                    
                    document.getElementById('info').innerHTML = 
                        '✅ File is accessible!<br>' +
                        'Size: ' + blob.size + ' bytes<br>' +
                        'Type: ' + blob.type + '<br><br>' +
                        'The issue might be with the GLB file format.';
                })
                .catch(fetchError => {
                    console.error('Fetch error:', fetchError);
                    document.getElementById('info').innerHTML = 
                        '❌ Cannot access file:<br>' +
                        fetchError.message + '<br><br>' +
                        'Check if file exists on GitHub.';
                });
        }
        
        // Animation
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();
        
        // Handle resize
        window.addEventListener('resize', function() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
